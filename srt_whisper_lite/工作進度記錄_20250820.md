# SRT Whisper Lite å·¥ä½œé€²åº¦è¨˜éŒ„

**æ—¥æœŸ**: 2025-08-20  
**å°ˆæ¡ˆè·¯å¾‘**: `C:\Users\USER-ART0\Desktop\SRTGO\srt_whisper_lite`  
**ç‹€æ…‹**: ä¿®å¾© Electron API å•é¡Œ

## ğŸ¯ **ä»Šæ—¥å·¥ä½œå…§å®¹**

### **1. CLAUDE.md æ–‡ä»¶æ›´æ–°**
âœ… åˆ†æäº†å°ˆæ¡ˆçµæ§‹ï¼Œç™¼ç¾æœ‰å…©å€‹ç‰ˆæœ¬ï¼š
- æ ¹ç›®éŒ„çš„ SRT Whisper Turbo 
- srt_whisper_lite çš„ SRT Whisper Lite v2.2.0ï¼ˆä¸»è¦å°ˆæ¡ˆï¼‰

âœ… å‰µå»ºäº†çµ±ä¸€çš„ CLAUDE.md æ–‡ä»¶ï¼Œæ•´åˆäº†ï¼š
- è‡ªé©æ‡‰èªéŸ³æª¢æ¸¬ç³»çµ±çš„è©³ç´°èªªæ˜
- å®Œæ•´çš„é–‹ç™¼å‘½ä»¤å’Œæ¸¬è©¦æµç¨‹
- æ¶æ§‹èªªæ˜å’Œæ–‡ä»¶è·¯å¾‘
- æ€§èƒ½åŸºæº–å’Œå•é¡Œè§£æ±ºè¨˜éŒ„

### **2. é©—è­‰è‡ªé©æ‡‰èªéŸ³æª¢æ¸¬ç³»çµ±**
âœ… ç¢ºèªæª”æ¡ˆä½ç½®æ­£ç¢ºï¼š
- é–‹ç™¼ç’°å¢ƒï¼š`electron-react-app/python/adaptive_voice_detector.py`
- ç”Ÿç”¢ç’°å¢ƒï¼š`dist/win-unpacked/resources/resources/python/adaptive_voice_detector.py`

âœ… æ¸¬è©¦è…³æœ¬é‹è¡ŒæˆåŠŸï¼ˆæœ‰ç·¨ç¢¼å’Œ NumPy ç‰ˆæœ¬è­¦å‘Šä½†åŠŸèƒ½æ­£å¸¸ï¼‰

### **3. ä¿®å¾© processFiles undefined éŒ¯èª¤**

**å•é¡Œåˆ†æ**ï¼š
- `window.electronAPI` åœ¨æŸäº›æƒ…æ³ä¸‹æœªå®šç¾©
- `preload.js` æ–‡ä»¶å­˜åœ¨ä½†å¯èƒ½æœªæ­£ç¢ºåŠ è¼‰

**è§£æ±ºæ–¹æ¡ˆå¯¦æ–½**ï¼š
1. **ä¿®æ”¹ App.js** - æ·»åŠ  electronAPI æª¢æŸ¥å’Œ fallback æ©Ÿåˆ¶
   ```javascript
   // æª¢æŸ¥ä¸¦å‰µå»º mock electronAPIï¼ˆé–‹ç™¼ç’°å¢ƒï¼‰
   if (!window.electronAPI) {
     console.error('window.electronAPI is undefined!');
     // å‰µå»º mock å°è±¡...
   }
   ```

2. **æ·»åŠ è™•ç†å‰æª¢æŸ¥** - åœ¨ `handleStartProcessing` å‡½æ•¸ä¸­
   ```javascript
   if (!window.electronAPI || !window.electronAPI.processFiles) {
     showToast('error', 'Electron API not available...');
     return;
   }
   ```

3. **è¤‡è£½ preload.js åˆ°æ‰“åŒ…ç›®éŒ„**
   - æ‰‹å‹•è¤‡è£½ï¼š`dist/win-unpacked/preload.js`
   - å‰µå»º `quick_build.bat` è‡ªå‹•åŒ–è…³æœ¬

## ğŸ“Š **å•é¡Œè¿½è¹¤**

### **å·²è§£æ±º**
âœ… CLAUDE.md éœ€è¦æ›´æ–° â†’ å·²å‰µå»ºçµ±ä¸€ç‰ˆæœ¬
âœ… processFiles undefined éŒ¯èª¤ â†’ å·²æ·»åŠ æª¢æŸ¥å’Œ fallback
âœ… è‡ªé©æ‡‰èªéŸ³æª¢æ¸¬ç³»çµ±é©—è­‰ â†’ ç¢ºèªæ­£å¸¸é‹ä½œ

### **å¾…è™•ç†**
ğŸ”˜ isPackaged é‡è¤‡å®£å‘ŠéŒ¯èª¤ï¼ˆå¯¦éš›åªæœ‰ä¸€è™•å®£å‘Šï¼Œå¯èƒ½æ˜¯èª¤å ±ï¼‰
ğŸ”˜ NumPy ç‰ˆæœ¬ç›¸å®¹æ€§å•é¡Œï¼ˆNumba needs NumPy 2.2 or less. Got NumPy 2.3ï¼‰
ğŸ”˜ æ•ˆèƒ½å„ªåŒ–è©•ä¼°
ğŸ”˜ å®Œæ•´çš„æ‡‰ç”¨ç¨‹å¼æ‰“åŒ…å’Œæ¸¬è©¦

## ğŸ”§ **æŠ€è¡“ç´°ç¯€**

### **Electron API æ¶æ§‹**
```
main.js (ä¸»é€²ç¨‹)
  â†“ è¼‰å…¥ preload.js
preload.js (é è¼‰è…³æœ¬)
  â†“ æš´éœ² electronAPI
renderer (React æ‡‰ç”¨)
  â†“ ä½¿ç”¨ window.electronAPI
```

### **é—œéµæ–‡ä»¶ä½ç½®**
- **ä¸»é€²ç¨‹**: `electron-react-app/main.js`
- **é è¼‰è…³æœ¬**: `electron-react-app/preload.js`
- **React æ‡‰ç”¨**: `electron-react-app/react-app/src/App.js`
- **Python å¾Œç«¯**: `electron-react-app/python/electron_backend.py`

## ğŸ“‹ **ä¸‹ä¸€æ­¥å·¥ä½œ**

1. **å®Œæ•´æ¸¬è©¦æ‰“åŒ…æ‡‰ç”¨ç¨‹å¼**
   - é‹è¡Œ `npm run dist` é€²è¡Œå®Œæ•´æ‰“åŒ…
   - æ¸¬è©¦ GUI åŠŸèƒ½æ˜¯å¦æ­£å¸¸

2. **ä¿®å¾© NumPy ç‰ˆæœ¬å•é¡Œ**
   - é™ç´š NumPy åˆ° 2.2 æˆ–ä»¥ä¸‹
   - æˆ–æ›´æ–° Numba åˆ°å…¼å®¹ç‰ˆæœ¬

3. **æ€§èƒ½å„ªåŒ–**
   - è©•ä¼°è‡ªé©æ‡‰èªéŸ³æª¢æ¸¬çš„æ€§èƒ½å½±éŸ¿
   - å„ªåŒ–è™•ç†æµç¨‹

4. **æ–‡æª”å®Œå–„**
   - æ›´æ–°ç”¨æˆ¶ä½¿ç”¨æŒ‡å—
   - æ·»åŠ æ•…éšœæ’é™¤éƒ¨åˆ†

## ğŸ’¾ **å‰µå»ºçš„æ–‡ä»¶**

1. `C:\Users\USER-ART0\Desktop\SRTGO\CLAUDE.md` - æ›´æ–°çš„å°ˆæ¡ˆæŒ‡å—
2. `srt_whisper_lite\fix_electron_api.js` - è¨ºæ–·è…³æœ¬
3. `srt_whisper_lite\quick_build.bat` - å¿«é€Ÿæ§‹å»ºè…³æœ¬
4. `srt_whisper_lite\electron-react-app\exclude_list.txt` - æ’é™¤åˆ—è¡¨
5. æœ¬æ–‡ä»¶ - å·¥ä½œé€²åº¦è¨˜éŒ„

## ğŸ‰ **ç¸½çµ**

ä»Šæ—¥ä¸»è¦å®Œæˆäº† Electron API å•é¡Œçš„è¨ºæ–·å’Œä¿®å¾©ï¼Œç¢ºä¿äº†æ‡‰ç”¨ç¨‹å¼çš„æ ¸å¿ƒåŠŸèƒ½å¯ä»¥æ­£å¸¸é‹ä½œã€‚è‡ªé©æ‡‰èªéŸ³æª¢æ¸¬ç³»çµ±å·²ç¢ºèªæ­£å¸¸é‹ä½œï¼ŒCLAUDE.md æ–‡æª”å·²æ›´æ–°ç‚ºçµ±ä¸€ç‰ˆæœ¬ã€‚ç³»çµ±ç¾åœ¨è™•æ–¼å¯æ¸¬è©¦ç‹€æ…‹ï¼Œå¾…é€²ä¸€æ­¥çš„æ‰“åŒ…å’Œå„ªåŒ–ã€‚

---
*ä¸‹æ¬¡å·¥ä½œé‡é»: å®Œæ•´æ‰“åŒ…æ¸¬è©¦å’Œæ€§èƒ½å„ªåŒ–*