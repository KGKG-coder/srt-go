<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRT GO - Language Selection</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .logo {
            font-size: 48px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 18px;
            color: #666;
            margin-bottom: 40px;
        }

        .language-selection {
            margin-bottom: 40px;
        }

        .language-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }

        .language-desc {
            font-size: 14px;
            color: #888;
            margin-bottom: 30px;
        }

        .language-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .language-option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .language-option:hover {
            border-color: #667eea;
            background: #f0f4ff;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.15);
        }

        .language-option.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .language-flag {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .language-name {
            font-weight: 600;
            font-size: 16px;
        }

        .language-native {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 4px;
        }

        .selected .language-native {
            opacity: 0.9;
        }

        .install-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 16px 40px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .install-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .install-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .browser-detect {
            font-size: 12px;
            color: #999;
            margin-top: 15px;
        }

        .checkmark {
            position: absolute;
            top: 8px;
            right: 8px;
            background: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #667eea;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .selected .checkmark {
            opacity: 1;
            color: #667eea;
            background: white;
        }
    </style>
    
    <!-- èªè¨€é…ç½®è…³æœ¬åƒè€ƒ -->
    <!-- Uses: setup_language_config_fixed.js for backend configuration -->
</head>
<body>
    <div class="container">
        <div class="logo">SRT GO</div>
        <div class="subtitle" id="subtitle">AI Subtitle Generator</div>
        
        <div class="language-selection">
            <div class="language-title" id="languageTitle">Choose Interface Language</div>
            <div class="language-desc" id="languageDesc">Select your preferred interface language. This cannot be changed later.</div>
            
            <div class="language-grid">
                <div class="language-option" data-lang="en">
                    <div class="language-flag">ğŸ‡ºğŸ‡¸</div>
                    <div class="language-name">English</div>
                    <div class="language-native">English</div>
                    <div class="checkmark">âœ“</div>
                </div>
                
                <div class="language-option" data-lang="zh-TW">
                    <div class="language-flag">ğŸ‡¹ğŸ‡¼</div>
                    <div class="language-name">Traditional Chinese</div>
                    <div class="language-native">ç¹é«”ä¸­æ–‡</div>
                    <div class="checkmark">âœ“</div>
                </div>
                
                <div class="language-option" data-lang="zh-CN">
                    <div class="language-flag">ğŸ‡¨ğŸ‡³</div>
                    <div class="language-name">Simplified Chinese</div>
                    <div class="language-native">ç®€ä½“ä¸­æ–‡</div>
                    <div class="checkmark">âœ“</div>
                </div>
                
                <div class="language-option" data-lang="ja">
                    <div class="language-flag">ğŸ‡¯ğŸ‡µ</div>
                    <div class="language-name">Japanese</div>
                    <div class="language-native">æ—¥æœ¬èª</div>
                    <div class="checkmark">âœ“</div>
                </div>
                
                <div class="language-option" data-lang="ko">
                    <div class="language-flag">ğŸ‡°ğŸ‡·</div>
                    <div class="language-name">Korean</div>
                    <div class="language-native">í•œêµ­ì–´</div>
                    <div class="checkmark">âœ“</div>
                </div>
            </div>
        </div>
        
        <button class="install-button" id="installButton" onclick="proceedInstall()">
            Continue Installation
        </button>
        
        <div class="browser-detect" id="browserDetect"></div>
    </div>

    <script>
        // èªè¨€å…§å®¹å®šç¾©
        const translations = {
            'en': {
                subtitle: 'AI Subtitle Generator',
                languageTitle: 'Choose Interface Language',
                languageDesc: 'Select your preferred interface language. This cannot be changed later.',
                installButton: 'Continue Installation',
                browserDetect: 'Browser language detected:'
            },
            'zh-TW': {
                subtitle: 'AI å­—å¹•ç”Ÿæˆå·¥å…·',
                languageTitle: 'é¸æ“‡ä»‹é¢èªè¨€',
                languageDesc: 'é¸æ“‡æ‚¨åå¥½çš„ä»‹é¢èªè¨€ã€‚å®‰è£å¾Œç„¡æ³•æ›´æ”¹ã€‚',
                installButton: 'ç¹¼çºŒå®‰è£',
                browserDetect: 'åµæ¸¬åˆ°ç€è¦½å™¨èªè¨€ï¼š'
            },
            'zh-CN': {
                subtitle: 'AI å­—å¹•ç”Ÿæˆå·¥å…·',
                languageTitle: 'é€‰æ‹©ç•Œé¢è¯­è¨€',
                languageDesc: 'é€‰æ‹©æ‚¨åå¥½çš„ç•Œé¢è¯­è¨€ã€‚å®‰è£…åæ— æ³•æ›´æ”¹ã€‚',
                installButton: 'ç»§ç»­å®‰è£…',
                browserDetect: 'æ£€æµ‹åˆ°æµè§ˆå™¨è¯­è¨€ï¼š'
            },
            'ja': {
                subtitle: 'AIå­—å¹•ç”Ÿæˆãƒ„ãƒ¼ãƒ«',
                languageTitle: 'ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨€èªã‚’é¸æŠ',
                languageDesc: 'å¸Œæœ›ã™ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨€èªã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã¯å¤‰æ›´ã§ãã¾ã›ã‚“ã€‚',
                installButton: 'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¶šè¡Œ',
                browserDetect: 'ãƒ–ãƒ©ã‚¦ã‚¶è¨€èªæ¤œå‡ºï¼š'
            },
            'ko': {
                subtitle: 'AI ìë§‰ ìƒì„± ë„êµ¬',
                languageTitle: 'ì¸í„°í˜ì´ìŠ¤ ì–¸ì–´ ì„ íƒ',
                languageDesc: 'ì›í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ ì–¸ì–´ë¥¼ ì„ íƒí•˜ì„¸ìš”. ì„¤ì¹˜ í›„ì—ëŠ” ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
                installButton: 'ì„¤ì¹˜ ê³„ì†',
                browserDetect: 'ë¸Œë¼ìš°ì € ì–¸ì–´ ê°ì§€ï¼š'
            }
        };

        let selectedLanguage = null;
        let currentUILanguage = 'en'; // é è¨­ä»‹é¢èªè¨€

        // ç²å–ç€è¦½å™¨èªè¨€
        function getBrowserLanguage() {
            const lang = navigator.language || navigator.userLanguage;
            
            if (lang.startsWith('zh')) {
                if (lang.includes('TW') || lang.includes('HK') || lang.includes('MO')) {
                    return 'zh-TW';
                }
                return 'zh-CN';
            } else if (lang.startsWith('ja')) {
                return 'ja';
            } else if (lang.startsWith('ko')) {
                return 'ko';
            }
            
            return 'en';
        }

        // æ›´æ–°ä»‹é¢èªè¨€
        function updateUILanguage(lang) {
            const t = translations[lang];
            if (!t) return;

            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('languageTitle').textContent = t.languageTitle;
            document.getElementById('languageDesc').textContent = t.languageDesc;
            document.getElementById('installButton').textContent = t.installButton;
            document.getElementById('browserDetect').textContent = t.browserDetect + ' ' + getLanguageName(lang);
        }

        // ç²å–èªè¨€é¡¯ç¤ºåç¨±
        function getLanguageName(lang) {
            const names = {
                'en': 'English',
                'zh-TW': 'ç¹é«”ä¸­æ–‡',
                'zh-CN': 'ç®€ä½“ä¸­æ–‡',
                'ja': 'æ—¥æœ¬èª',
                'ko': 'í•œêµ­ì–´'
            };
            return names[lang] || 'English';
        }

        // åˆå§‹åŒ–
        function init() {
            const browserLang = getBrowserLanguage();
            
            // è¨­ç½®ä»‹é¢èªè¨€ç‚ºç€è¦½å™¨èªè¨€
            currentUILanguage = browserLang;
            updateUILanguage(currentUILanguage);
            
            // é é¸ç€è¦½å™¨èªè¨€
            selectLanguage(browserLang);
            
            // ç¶å®šèªè¨€é¸é …é»æ“Šäº‹ä»¶
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', () => {
                    const lang = option.dataset.lang;
                    selectLanguage(lang);
                    // å³æ™‚æ›´æ–°ä»‹é¢èªè¨€
                    currentUILanguage = lang;
                    updateUILanguage(lang);
                });
            });
        }

        // é¸æ“‡èªè¨€
        function selectLanguage(lang) {
            // ç§»é™¤æ‰€æœ‰é¸ä¸­ç‹€æ…‹
            document.querySelectorAll('.language-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // æ·»åŠ é¸ä¸­ç‹€æ…‹
            const option = document.querySelector(`[data-lang="${lang}"]`);
            if (option) {
                option.classList.add('selected');
                selectedLanguage = lang;
            }
        }

        // ç¹¼çºŒå®‰è£
        function proceedInstall() {
            if (!selectedLanguage) {
                alert('Please select a language first / è«‹å…ˆé¸æ“‡èªè¨€ / è¯·å…ˆé€‰æ‹©è¯­è¨€ / ã¾ãšè¨€èªã‚’é¸æŠã—ã¦ãã ã•ã„ / ë¨¼ì € ì–¸ì–´ë¥¼ ì„ íƒí•˜ì„¸ìš”');
                return;
            }

            // å‰µå»ºèªè¨€é…ç½®æª”æ¡ˆ
            const config = {
                selectedLanguage: selectedLanguage,
                installTime: new Date().toISOString(),
                browserLanguage: navigator.language
            };

            // ä¿å­˜åˆ°æ–‡ä»¶ï¼ˆå¯¦éš›å¯¦ç¾ä¸­æœƒèª¿ç”¨ Electron APIï¼‰
            if (window.electron) {
                window.electron.saveLanguageConfig(config);
            } else {
                // æ¸¬è©¦æ¨¡å¼ - ä½¿ç”¨ localStorage
                localStorage.setItem('srtgo_language_config', JSON.stringify(config));
                console.log('Language configuration saved:', config);
                
                // èª¿ç”¨èªè¨€é…ç½®è…³æœ¬
                console.log('Language setup will use: setup_language_config_fixed.js');
            }

            // é¡¯ç¤ºå®‰è£é€²åº¦
            showInstallProgress();
        }

        // é¡¯ç¤ºå®‰è£é€²åº¦
        function showInstallProgress() {
            const container = document.querySelector('.container');
            container.innerHTML = `
                <div class="logo">SRT GO</div>
                <div class="subtitle">${translations[currentUILanguage].subtitle}</div>
                
                <div style="margin: 40px 0;">
                    <div style="font-size: 20px; font-weight: 600; margin-bottom: 20px;">
                        ${getInstallText()}
                    </div>
                    
                    <div style="background: #f0f0f0; border-radius: 20px; height: 8px; overflow: hidden; margin-bottom: 20px;">
                        <div id="progressBar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 100%; width: 0%; transition: width 0.5s ease;"></div>
                    </div>
                    
                    <div id="installStep" style="color: #666; font-size: 14px;">
                        ${getInitText()}
                    </div>
                </div>
            `;

            // æ¨¡æ“¬å®‰è£é€²åº¦
            simulateInstall();
        }

        function getInstallText() {
            const texts = {
                'en': 'Installing SRT GO...',
                'zh-TW': 'æ­£åœ¨å®‰è£ SRT GO...',
                'zh-CN': 'æ­£åœ¨å®‰è£… SRT GO...',
                'ja': 'SRT GO ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­...',
                'ko': 'SRT GO ì„¤ì¹˜ ì¤‘...'
            };
            return texts[currentUILanguage] || texts['en'];
        }

        function getInitText() {
            const texts = {
                'en': 'Initializing installation...',
                'zh-TW': 'åˆå§‹åŒ–å®‰è£ç¨‹åº...',
                'zh-CN': 'åˆå§‹åŒ–å®‰è£…ç¨‹åº...',
                'ja': 'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’åˆæœŸåŒ–ä¸­...',
                'ko': 'ì„¤ì¹˜ ì´ˆê¸°í™” ì¤‘...'
            };
            return texts[currentUILanguage] || texts['en'];
        }

        // æ¨¡æ“¬å®‰è£é€²åº¦
        function simulateInstall() {
            const steps = [
                { progress: 20, text: getStepText('dependencies') },
                { progress: 40, text: getStepText('models') },
                { progress: 60, text: getStepText('frontend') },
                { progress: 80, text: getStepText('backend') },
                { progress: 100, text: getStepText('complete') }
            ];

            let currentStep = 0;

            function nextStep() {
                if (currentStep < steps.length) {
                    const step = steps[currentStep];
                    document.getElementById('progressBar').style.width = step.progress + '%';
                    document.getElementById('installStep').textContent = step.text;
                    
                    currentStep++;
                    setTimeout(nextStep, 1500);
                } else {
                    // å®‰è£å®Œæˆ
                    setTimeout(() => {
                        if (window.electron) {
                            window.electron.completeInstall();
                        } else {
                            alert('Installation completed! / å®‰è£å®Œæˆï¼ / å®‰è£…å®Œæˆï¼ / ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ï¼ / ì„¤ì¹˜ ì™„ë£Œ!');
                        }
                    }, 1000);
                }
            }

            nextStep();
        }

        function getStepText(step) {
            const texts = {
                'en': {
                    'dependencies': 'Installing dependencies...',
                    'models': 'Setting up AI models...',
                    'frontend': 'Configuring interface...',
                    'backend': 'Setting up backend...',
                    'complete': 'Installation completed!'
                },
                'zh-TW': {
                    'dependencies': 'å®‰è£ä¾è³´é …ç›®...',
                    'models': 'è¨­ç½® AI æ¨¡å‹...',
                    'frontend': 'é…ç½®ä»‹é¢...',
                    'backend': 'è¨­ç½®å¾Œç«¯...',
                    'complete': 'å®‰è£å®Œæˆï¼'
                },
                'zh-CN': {
                    'dependencies': 'å®‰è£…ä¾èµ–é¡¹ç›®...',
                    'models': 'è®¾ç½® AI æ¨¡å‹...',
                    'frontend': 'é…ç½®ç•Œé¢...',
                    'backend': 'è®¾ç½®åç«¯...',
                    'complete': 'å®‰è£…å®Œæˆï¼'
                },
                'ja': {
                    'dependencies': 'ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­...',
                    'models': 'AI ãƒ¢ãƒ‡ãƒ«ã‚’è¨­å®šä¸­...',
                    'frontend': 'ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’è¨­å®šä¸­...',
                    'backend': 'ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’è¨­å®šä¸­...',
                    'complete': 'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ï¼'
                },
                'ko': {
                    'dependencies': 'ì¢…ì†ì„± ì„¤ì¹˜ ì¤‘...',
                    'models': 'AI ëª¨ë¸ ì„¤ì • ì¤‘...',
                    'frontend': 'ì¸í„°í˜ì´ìŠ¤ êµ¬ì„± ì¤‘...',
                    'backend': 'ë°±ì—”ë“œ ì„¤ì • ì¤‘...',
                    'complete': 'ì„¤ì¹˜ ì™„ë£Œ!'
                }
            };
            return texts[currentUILanguage][step] || texts['en'][step];
        }

        // é é¢è¼‰å…¥å¾Œåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>